<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="longfei"><meta name=description content="隆飞的个人博客"><meta name=keywords content="Golang,Database,macOS,Life,Thinking"><link rel=prev href=http://longfeis.me/2020/hello-hugo-blog/><link rel=next href=http://longfeis.me/2021/my-macos-setup/><link rel=canonical href=http://longfeis.me/2020/hackintosh/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>黑果折腾笔记 WIP | 隆飞</title><meta name=title content="黑果折腾笔记 WIP | 隆飞"><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/longfeis.me\/"},"articleSection":"posts","name":"黑果折腾笔记 WIP","headline":"黑果折腾笔记 WIP","description":"概述 组黑苹果有两个层次，如下所述： 能用的黑果 ✅ 正确配置 OC 引导，能够正常的进入 macOS，能够安装并使用工作常用的软件。本人系程序猿一枚，常用","inLanguage":"zh-cn","author":"longfei","creator":"longfei","publisher":"longfei","accountablePerson":"longfei","copyrightHolder":"longfei","copyrightYear":"2020","datePublished":"2020-12-29 09:25:49 \u002b0800 \u002b0800","dateModified":"2020-12-29 09:25:49 \u002b0800 \u002b0800","url":"http:\/\/longfeis.me\/2020\/hackintosh\/","wordCount":"2019","keywords":["macOS","隆飞"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>➜ ~</span>
<a href=http://longfeis.me/><span class=logo_text>sudo rm -fr /</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/posts/ title>Blog</a>
<a class=menu-item href=/categories/ title>Categories</a>
<a class=menu-item href=/tags/ title>Tags</a>
<a class=menu-item href=/about/ title>About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=http://longfeis.me/>隆飞</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/posts/ title><h3>Blog</h3><div class=menu-active></div></a><a class=menu-item href=/categories/ title><h3>Categories</h3><div class=menu-active></div></a><a class=menu-item href=/tags/ title><h3>Tags</h3><div class=menu-active></div></a><a class=menu-item href=/about/ title><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">黑果折腾笔记 WIP</h1><div class=post-meta>Written by <a itemprop=name href=http://longfeis.me/ rel=author>longfei</a> with ♥
<span class=post-time>on <time datetime=2020-12-29 itemprop=datePublished>December 29, 2020</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=http://longfeis.me/categories/macos%E7%9B%B8%E5%85%B3%E5%B0%B1%E6%90%81%E8%BF%99%E5%84%BF%E5%90%A7/>macOS相关就搁这儿吧,</a></span>
<span class=post-word-count>2019 words</span></div></header><div class=post-content><h2 id=概述>概述</h2><p>组黑苹果有两个层次，如下所述：</p><ol><li><p>能用的黑果 ✅</p><p>正确配置 OC 引导，能够正常的进入 macOS，能够安装并使用工作常用的软件。本人系程序猿一枚，常用的工作环境以及软件有 homebrew、golang、docker、vscode 等，这些软件因人而异。</p></li><li><p>好用的黑果</p><p>支持蓝牙、随航、隔空投送、正常休眠唤醒、各种 usb 设备正常工作。但这些都是使用黑果的非必要条件。</p></li></ol><p>对于我个人来说，折腾黑果的最大动力就是经济效益。</p><p>我的需求是：</p><p>黑果能够提供给我一个<strong>稳定有效</strong>的工作环境。我不太介意每次开机需要重新插拔一下键盘或者鼠标的 USB 接口，也不太介意能否正常休眠唤醒（PS. 因为是台式机，所以不太需要休眠，能锁屏就行）。所以对我来说，第一目标就可以满足我的需求，第二目标中的一些功能可以等到需要时再慢慢想办法支持。</p><h2 id=介绍>介绍</h2><p>我最开始接触并动手组建自己的黑果是在 2020 年，这是一个尴尬的时间节点。因为在 2020 年，苹果公司推出了基于 arm 架构的 m1 芯片（据坊间测评，性能提升还蛮多）。这意味着基于x86的黑果可能没有多少日子了。但是，如果是为了工作或者单纯体验一下苹果系统，这并不是很大的问题。</p><p>目前，我已成功在两台不同配置的台式机上装上了macOS，分别是：</p><ol><li>8700k + 华硕ROG的m10f（z370芯片组）</li><li>10700 + 微星迫击炮b460m</li></ol><p>其中配置1是2018年组装的，并非以装黑果为目的，安装的时候遇到了一些小问题；而配置2是根据黑果的要求进行的硬件选购，安装起来要方便很多。</p><p>对于不同配置，安装过程大同小异，下面就来说说安装黑果的一个大致流程👇。</p><h2 id=安装的流程步骤>安装的流程步骤</h2><p>安装大致分为以下5步：</p><ol><li>查看（确定）电脑配置</li><li>收集（制作）EFI</li><li>制作USB启动盘</li><li>安装调试</li><li>mac setup</li></ol><h2 id=配置>配置</h2><p>我将以 8700k 这套为代表来对黑果硬件进行说明。</p><p>这套攒于2018年，是当时的顶配。目前服役2年多，当时主要是为了玩游戏，并未考虑后面会安装黑苹果。</p><p>先列下配置，再说下这套配置的问题，最后在说下配置的选择。</p><p><strong>配置单</strong></p><table><thead><tr><th>配件</th><th>型号</th></tr></thead><tbody><tr><td>CPU</td><td>Intel(R) Core(TM) i7-8700K CPU @ 3.70GHz</td></tr><tr><td>GPU（显卡）</td><td>NVIDIA GeForce GTX 1080 Ti<br>intel UHD630</td></tr><tr><td>主板芯片组</td><td>Z370</td></tr><tr><td>声卡</td><td>NVIDIA GP102 HDMI/DP @ NVIDIA GP102 - High Definition Audio Controller<br>Realtek ALC1220 @ Intel Kaby Point PCH - High Definition Audio Controller (Audio, Voice, Speech)</td></tr><tr><td>网卡</td><td>Intel Ethernet Connection (2) I219-V<br>Realtek RTL8822BE Wireless LAN 802.11ac PCI-E Network Adapter</td></tr><tr><td>硬盘</td><td>Samsung SSD 960 EVO 250GB<br>WDC WD20EZRZ-00Z5HB0</td></tr></tbody></table><p><strong>配置问题</strong></p><p>这套配置中NVIDIA显卡和Realtek无线网卡是没法驱动的。</p><p>对于显卡而言，如果有剪辑视频需求，那么需要另行购入免驱A卡，N卡都是不能驱动的（只能安装较低版本的macOS）。本人主要是用来作后端开发，直接使用8700k自带uhd630核显就可以。</p><p>对于无线网卡，本人另外购买了博通的BCM94360CD，这是免驱卡，可以同时解决无线和蓝牙的问题。</p><p><strong>配置怎么选</strong></p><p>网上有很多类似的说明，下面是我的简要心得：</p><ol><li>cpu选intel的，最好是带核显，amd虽然也行，但是安装起来比较折腾</li><li>显卡，最好购买a卡，买之前先查查能否在macOS中免驱，N卡就别想了</li><li>无线网卡，买博通的免驱网卡，在windows上也可以用</li><li>如果是从零组机，那就照着别人的配置单抄吧。那么，整个安装过程就简单百倍。</li></ol><p>其他的好像也没啥特别注意的地方了。如果想详细了解硬件限制，推荐阅读下面这篇文章：<a href=https://dortania.github.io/OpenCore-Install-Guide/macos-limits.html>Hardware Limitations</a>。</p><h2 id=制作efi>制作EFI</h2><p>最简单的方法就是收集别人做好的EFI。可以到github上以<code>CPU 芯片组 EFI</code>为关键词进行搜索，如<code>8700k z370 EFI</code>，也可以去远景论坛看看。</p><p>但是，我还是推荐自己动手制作EFI，其实也没那么困难。推荐的阅读材料《<a href=https://dortania.github.io/OpenCore-Install-Guide/>OpenCore-Install-Guide</a>》。对于手动制作EFI的人来说，大概都会看这个install guide吧，我反正是看了两遍。</p><p>制作EFI，主要分为三大部分：</p><ol><li>制作USB启动盘</li><li>收集Kexts、Drivers以及SSDT</li><li>配置config.plist</li></ol><p>👇是一些我认为的<strong>关键术语</strong>，以及我个人的理解：</p><table><thead><tr><th>术语</th><th>描述</th></tr></thead><tbody><tr><td><strong>ACPI</strong></td><td>高级配置与电源接口。是一种规范，用来定义固件抽象接口。详细可以阅读 <a href=https://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface>维基百科</a></td></tr><tr><td><strong>Kexts</strong></td><td>内核拓展，可以理解为macOS的驱动</td></tr><tr><td><strong>Drivers</strong></td><td>指UEFI驱动</td></tr><tr><td><strong>DSDT</strong></td><td>Differentiated System Description Table. DSDT可以被看作是持有大部分信息的主体，就如同项目蓝图。</td></tr><tr><td><strong>SSDT</strong></td><td>Secondary System Description Table. SSDT传递较小的信息，可以想象为项目进展中的便利贴。</td></tr></tbody></table><h3 id=制作usb启动盘>制作USB启动盘</h3><p>TODO</p><h3 id=收集kextsdrivers以及ssdt>收集Kexts、Drivers以及SSDT</h3><p>TODO</p><h3 id=配置configplist>配置config.plist</h3><p>TODO</p><h2 id=安装调试>安装调试</h2><p>TODO</p><p>提纲：</p><ol><li>bios设置</li><li>格式化mac磁盘</li><li>u盘启动到硬盘启动</li><li>2k显示器开启hDPI</li><li>自定义USB端口</li><li>屏蔽不支持的独显（双显卡以及切换）</li></ol><p>问题：</p><p>双显卡及其切换</p><p>Usb3.0不识别</p><p>显示器字体发虚</p><p>双系统相关：更改opencore默认启动项；windows正常使用独显</p><p>开机黑屏，必须重启显示器或者插拔连接线才能正常工作</p><p>蓝牙</p><h2 id=mac-setup>mac Setup</h2><p>mac Setup是指对一个刚安装好的 mac 系统进行系统配置和软件安装，适用于正规的 macOS 硬件和黑果。针对这部分内容，我会单独再写一篇文章。这里就不再赘述。</p><h2 id=展示环节>展示环节</h2><p>TODO</p><h2 id=参考资料>参考资料</h2><ol><li>《<a href=https://dortania.github.io/OpenCore-Install-Guide/>OpenCore-Install-Guide</a>》黑果入门级教程，写得非常详细</li><li><a href=https://www.bilibili.com/video/BV18V41187JZ>新手挑战黑苹果-超详细的OpenCore黑苹果安装教程</a> B站上的视频教程</li></ol><br><center>·End·</center></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>longfei</span></p><p class=copyright-item><span>Link:</span>
<a href=http://longfeis.me/2020/hackintosh/>http://longfeis.me/2020/hackintosh/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ style=color:#ff1493 target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=http://longfeis.me/tags/macos/>#macOS</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=http://longfeis.me/>home</a></span></section></div><div class=post-nav><a href=http://longfeis.me/2020/hello-hugo-blog/ class=prev rel=prev title="Hello Hugo Blog"><i class="iconfont icon-left"></i>&nbsp;Hello Hugo Blog</a>
<a href=http://longfeis.me/2021/my-macos-setup/ class=next rel=next title="My macOS Setup">My macOS Setup&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2020 - 2021</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href=http://longfeis.me/>longfei</a> |</span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/Mogeko/Mogege target=_blank rel="external nofollow">Mogege</a></span></div></footer><script defer src=/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage()</script></div></body></html>